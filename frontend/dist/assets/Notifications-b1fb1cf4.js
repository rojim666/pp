import{_ as S,r as _,N as E,s as L,q as T,E as H,o as n,c as i,b as s,i as d,h as C,F as h,z as x,t as a,y as m,A as r,w as y,k as f,O as u}from"./index-324e4295.js";const I={class:"notifications-page"},j={class:"page-header"},q={class:"header-actions"},D={class:"filter-tabs"},O=["onClick"],G={key:0,class:"count-badge"},J={class:"stats-grid"},K={class:"stat-card"},P={class:"stat-icon",style:{background:"linear-gradient(135deg, #FF9500, #FF8C00)"}},Q={class:"stat-content"},U={class:"stat-value"},W={class:"stat-card"},X={class:"stat-icon",style:{background:"linear-gradient(135deg, #34C759, #30B74F)"}},Y={class:"stat-content"},Z={class:"stat-value"},ss={class:"stat-card"},ts={class:"stat-icon",style:{background:"linear-gradient(135deg, #5AC8FA, #0AB5FF)"}},es={class:"stat-content"},ls={class:"stat-value"},os={class:"stat-card"},ns={class:"stat-icon",style:{background:"linear-gradient(135deg, #FF6B40, #FF5E3A)"}},is={class:"stat-content"},as={class:"stat-value"},ds={class:"notifications-list"},rs=["onClick"],us={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},cs={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vs={key:2,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gs={key:3,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ks={class:"notification-content"},ms={class:"notification-header"},ps={class:"notification-time"},_s={class:"notification-message"},ys={class:"notification-footer"},fs={class:"category-tag"},bs={class:"notification-actions"},ws=["onClick"],Cs=["onClick"],hs={class:"modal-header"},xs={class:"modal-body"},Fs={class:"setting-item"},Ns={class:"setting-item"},$s={class:"setting-item"},As={class:"setting-item"},Bs={class:"modal-footer"},zs={__name:"Notifications",setup(Ms){const k=_("all"),c=_(!1),v=E(),{notifications:g,unreadCount:b,readCount:F,todayCount:N}=L(v);T(()=>{v.fetchNotifications()});const $=[{type:"all",label:"全部",icon:"list"},{type:"unread",label:"未读",icon:"bell"},{type:"system",label:"系统",icon:"settings"},{type:"device",label:"设备",icon:"plug"},{type:"business",label:"业务",icon:"file-text"}],o=_({system:!0,device:!0,user:!0,desktop:!1}),A=H(()=>k.value==="all"?g.value:k.value==="unread"?g.value.filter(l=>!l.read):g.value.filter(l=>l.tab===k.value)),w=l=>l==="all"?g.value.length:l==="unread"?b.value:g.value.filter(t=>t.tab===l).length,B=()=>{v.markAllRead()},z=l=>{v.markAsRead(l.id)},M=l=>{confirm("确定要删除这条通知吗？")&&v.deleteNotification(l)},R=l=>{v.markAsRead(l.id),console.log("打开通知详情:",l)},V=()=>{console.log("保存设置:",o.value),c.value=!1,alert("通知设置已保存！")};return(l,t)=>(n(),i("div",I,[s("div",j,[t[11]||(t[11]=s("div",{class:"header-left"},[s("h1",null,"通知中心"),s("p",{class:"subtitle"},"管理和查看所有系统通知")],-1)),s("div",q,[s("button",{class:"action-btn secondary",onClick:B},[d(u,{name:"check",size:"sm"}),t[9]||(t[9]=C(" 全部已读 ",-1))]),s("button",{class:"action-btn",onClick:t[0]||(t[0]=e=>c.value=!0)},[d(u,{name:"settings",size:"sm"}),t[10]||(t[10]=C(" 通知设置 ",-1))])])]),s("div",D,[(n(),i(h,null,x($,e=>s("button",{key:e.type,class:r(["tab-btn",{active:k.value===e.type}]),onClick:p=>k.value=e.type},[d(u,{name:e.icon,size:"sm"},null,8,["name"]),s("span",null,a(e.label),1),w(e.type)>0?(n(),i("span",G,a(w(e.type)),1)):f("",!0)],10,O)),64))]),s("div",J,[s("div",K,[s("div",P,[d(u,{name:"bell",size:"md"})]),s("div",Q,[s("div",U,a(m(b)),1),t[12]||(t[12]=s("div",{class:"stat-label"},"未读通知",-1))])]),s("div",W,[s("div",X,[d(u,{name:"check",size:"md"})]),s("div",Y,[s("div",Z,a(m(F)),1),t[13]||(t[13]=s("div",{class:"stat-label"},"已读通知",-1))])]),s("div",ss,[s("div",ts,[d(u,{name:"list",size:"md"})]),s("div",es,[s("div",ls,a(m(g).length),1),t[14]||(t[14]=s("div",{class:"stat-label"},"全部通知",-1))])]),s("div",os,[s("div",ns,[d(u,{name:"trending",size:"md"})]),s("div",is,[s("div",as,"+"+a(m(N)),1),t[15]||(t[15]=s("div",{class:"stat-label"},"今日新增",-1))])])]),s("div",ds,[(n(!0),i(h,null,x(A.value,e=>(n(),i("div",{key:e.id,class:r(["notification-card",{unread:!e.read,[e.type]:!0}]),onClick:p=>R(e)},[t[20]||(t[20]=s("div",{class:"notification-indicator"},null,-1)),s("div",{class:r(["notification-icon",e.type])},[e.type==="success"?(n(),i("svg",us,[...t[16]||(t[16]=[s("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):e.type==="warning"?(n(),i("svg",cs,[...t[17]||(t[17]=[s("path",{d:"M12 9V13M12 17H12.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)])])):e.type==="error"?(n(),i("svg",vs,[...t[18]||(t[18]=[s("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),s("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),s("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)])])):(n(),i("svg",gs,[...t[19]||(t[19]=[s("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"},null,-1),s("path",{d:"M12 8V12M12 16H12.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)])]))],2),s("div",ks,[s("div",ms,[s("h3",null,a(e.title),1),s("span",ps,a(e.time),1)]),s("p",_s,a(e.message),1),s("div",ys,[s("span",fs,a(e.category),1),s("div",bs,[e.read?f("",!0):(n(),i("button",{key:0,class:"mark-read-btn",onClick:y(p=>z(e),["stop"])}," 标记已读 ",8,ws)),s("button",{class:"delete-btn",onClick:y(p=>M(e.id),["stop"])}," 删除 ",8,Cs)])])])],10,rs))),128))]),c.value?(n(),i("div",{key:0,class:"modal-overlay",onClick:t[8]||(t[8]=e=>c.value=!1)},[s("div",{class:"modal-content",onClick:t[7]||(t[7]=y(()=>{},["stop"]))},[s("div",hs,[t[21]||(t[21]=s("h2",null,"通知设置",-1)),s("button",{class:"close-btn",onClick:t[1]||(t[1]=e=>c.value=!1)},"✕")]),s("div",xs,[s("div",Fs,[t[23]||(t[23]=s("div",{class:"setting-info"},[s("h4",null,"系统通知"),s("p",null,"接收系统更新、维护等重要通知")],-1)),s("div",{class:r(["toggle-switch",{active:o.value.system}]),onClick:t[2]||(t[2]=e=>o.value.system=!o.value.system)},[...t[22]||(t[22]=[s("div",{class:"toggle-thumb"},null,-1)])],2)]),s("div",Ns,[t[25]||(t[25]=s("div",{class:"setting-info"},[s("h4",null,"设备通知"),s("p",null,"接收设备状态、告警等通知")],-1)),s("div",{class:r(["toggle-switch",{active:o.value.device}]),onClick:t[3]||(t[3]=e=>o.value.device=!o.value.device)},[...t[24]||(t[24]=[s("div",{class:"toggle-thumb"},null,-1)])],2)]),s("div",$s,[t[27]||(t[27]=s("div",{class:"setting-info"},[s("h4",null,"用户通知"),s("p",null,"接收用户注册、操作等通知")],-1)),s("div",{class:r(["toggle-switch",{active:o.value.user}]),onClick:t[4]||(t[4]=e=>o.value.user=!o.value.user)},[...t[26]||(t[26]=[s("div",{class:"toggle-thumb"},null,-1)])],2)]),s("div",As,[t[29]||(t[29]=s("div",{class:"setting-info"},[s("h4",null,"桌面通知"),s("p",null,"在桌面显示通知提醒")],-1)),s("div",{class:r(["toggle-switch",{active:o.value.desktop}]),onClick:t[5]||(t[5]=e=>o.value.desktop=!o.value.desktop)},[...t[28]||(t[28]=[s("div",{class:"toggle-thumb"},null,-1)])],2)])]),s("div",Bs,[s("button",{class:"btn secondary",onClick:t[6]||(t[6]=e=>c.value=!1)},"取消"),s("button",{class:"btn primary",onClick:V},"保存设置")])])])):f("",!0)]))}},Vs=S(zs,[["__scopeId","data-v-3b501927"]]);export{Vs as default};
