import{n as p,r as o,D as s,I as c}from"./index-80ce5560.js";import{a as l}from"./index-1d215042.js";const B=p("record",()=>{const a=o([]),n=o(!1),r=o(null),d=s(()=>a.value.length),i=s(()=>a.value.filter(e=>e.status===l.CHARGING).length),f=s(()=>a.value.filter(e=>e.status===l.COMPLETED).length),g=s(()=>a.value.reduce((e,t)=>e+t.energy,0)),v=s(()=>a.value.reduce((e,t)=>e+t.totalFee,0)),y=s(()=>a.value.slice(0,10));async function h(){n.value=!0,r.value=null;try{const e=await c.list();a.value=e.data.records||e.data}catch(e){r.value=e.message,console.error("Failed to fetch records:",e)}finally{n.value=!1}}async function m(e){try{return(await c.get(e)).data}catch(t){return r.value=t.message,null}}async function R(e){try{const t=await c.list({userId:e});return t.data.records||t.data}catch(t){return r.value=t.message,[]}}async function C(e){try{const t=await c.list({stationId:e});return t.data.records||t.data}catch(t){return r.value=t.message,[]}}async function I(e){n.value=!0;try{const u=(await c.start(e)).data;return a.value.unshift(u),u}catch(t){return r.value=t.message,null}finally{n.value=!1}}return{records:a,loading:n,error:r,totalCount:d,chargingCount:i,completedCount:f,totalEnergy:g,totalRevenue:v,recentRecords:y,fetchRecords:h,getRecordById:m,getRecordsByUserId:R,getRecordsByStationId:C,createRecord:I}});export{B as u};
