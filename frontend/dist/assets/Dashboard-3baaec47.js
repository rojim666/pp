import{i as k}from"./index-6433f102.js";import{n as T,r as d,p as A,_ as O,s as W,q as z,x as I,o as S,c as C,b as t,t as n,y as v,d as E,F as N,z as V,A as q,B as M}from"./index-80ce5560.js";const P=T("dashboard",()=>{const f=d(null),o=d(!1),a=d(null);async function b(){o.value=!0,a.value=null;try{const e=await A.getStats();f.value=e.data}catch(e){a.value=e.message,console.error("Failed to fetch dashboard stats:",e)}finally{o.value=!1}}return{stats:f,loading:o,error:a,fetchDashboardStats:b}});const j={class:"dashboard"},G={class:"stats-grid"},H={class:"stat-card"},J={class:"stat-content"},K={class:"stat-value"},Q={class:"stat-card highlight-green"},U={class:"stat-content"},X={class:"stat-value"},Y={class:"stat-card"},Z={class:"stat-content"},$={class:"stat-value"},tt={class:"stat-card"},st={class:"stat-content"},at={class:"stat-value"},et={class:"chart-section"},it={class:"bottom-grid"},ot={class:"card"},lt={class:"card"},rt={class:"card"},nt={class:"help-list"},dt={class:"help-text"},ct={__name:"Dashboard",setup(f){const o=P(),{stats:a,loading:b}=W(o),e=d(null),g=d(null),u=d(null);let c=null,h=null;const R=[{badge:"须知",type:"warning",text:"识别用户前请出的充电桩"},{badge:"须知",type:"info",text:"充电桩在维护前请提，将影响该车区小时内"},{badge:"须知",type:"info",text:"断网门户遭到搁置，可适宜宣为处以提供该本"},{badge:"建议",type:"success",text:"昨的充电桩故障，正在"},{badge:"建议",type:"success",text:"最新充电桩操作统等"},{badge:"建议",type:"success",text:"T线充电桩故障，旧因解释"},{badge:"提醒",type:"danger",text:"关注充电安全知识前，保留昨顿的一次布使"}];z(()=>{o.fetchDashboardStats()}),I(a,l=>{l&&M(()=>{D(),B(),L()})});const D=()=>{if(!e.value||!a.value)return;c&&c.dispose(),c=k(e.value);const l=a.value.energyTrend.map(r=>r.date.substring(5)),s=a.value.energyTrend.map(r=>r.energy),i={grid:{left:"3%",right:"4%",bottom:"3%",top:"10%",containLabel:!0},xAxis:{type:"category",data:l,axisLine:{lineStyle:{color:"#ddd"}},axisLabel:{color:"#666"}},yAxis:{type:"value",splitLine:{lineStyle:{color:"#f0f0f0"}},axisLabel:{color:"#666"}},series:[{data:s,type:"bar",itemStyle:{color:"#5ec98f",borderRadius:[4,4,0,0]},barWidth:"40%"}]};c.setOption(i)},B=()=>{g.value},L=()=>{if(!u.value||!a.value)return;h&&h.dispose(),h=k(u.value);const l=a.value.stationStatusDistribution.map(i=>({value:i.count,name:i.status})),s={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"充电桩状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:l}]};h.setOption(s)};return(l,s)=>{var i,r,y,_,x,m,w;return S(),C("div",j,[s[12]||(s[12]=t("h1",{class:"page-title"},"充电桩记录展示",-1)),t("div",G,[t("div",H,[s[0]||(s[0]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"平均充电时长 (分)")],-1)),t("div",J,[t("div",K,n(((r=(i=v(a))==null?void 0:i.averageChargingTime)==null?void 0:r.toFixed(0))||0),1)]),s[1]||(s[1]=t("div",{class:"mini-chart"},[t("svg",{viewBox:"0 0 100 30",class:"line-chart"},[t("polyline",{points:"0,20 20,15 40,18 60,10 80,12 100,15",fill:"none",stroke:"#4a90e2","stroke-width":"2"})])],-1))]),t("div",Q,[s[2]||(s[2]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"今日充电电量 (kWh)")],-1)),t("div",U,[t("div",X,n(((_=(y=v(a))==null?void 0:y.todayEnergy)==null?void 0:_.toFixed(1))||0),1)]),s[3]||(s[3]=E('<div class="mini-chart" data-v-8abf16ca><svg viewBox="0 0 100 30" class="bar-chart" data-v-8abf16ca><rect x="5" y="15" width="8" height="15" fill="#5ec98f" opacity="0.6" data-v-8abf16ca></rect><rect x="18" y="10" width="8" height="20" fill="#5ec98f" opacity="0.7" data-v-8abf16ca></rect><rect x="31" y="8" width="8" height="22" fill="#5ec98f" opacity="0.8" data-v-8abf16ca></rect><rect x="44" y="5" width="8" height="25" fill="#5ec98f" data-v-8abf16ca></rect><rect x="57" y="12" width="8" height="18" fill="#5ec98f" opacity="0.7" data-v-8abf16ca></rect><rect x="70" y="10" width="8" height="20" fill="#5ec98f" opacity="0.8" data-v-8abf16ca></rect></svg></div>',1))]),t("div",Y,[s[4]||(s[4]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"今日收入 (元)")],-1)),t("div",Z,[t("div",$,n(((m=(x=v(a))==null?void 0:x.todayRevenue)==null?void 0:m.toFixed(2))||0),1)]),s[5]||(s[5]=t("div",{class:"mini-chart"},[t("svg",{viewBox:"0 0 100 30",class:"line-chart"},[t("polyline",{points:"0,15 20,18 40,12 60,16 80,10 100,14",fill:"none",stroke:"#4a90e2","stroke-width":"2"})])],-1))]),t("div",tt,[s[6]||(s[6]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"充电中桩数")],-1)),t("div",st,[t("div",at,n(((w=v(a))==null?void 0:w.chargingStations)||0),1)]),s[7]||(s[7]=t("div",{class:"mini-chart"},[t("svg",{viewBox:"0 0 40 40",class:"donut-chart"},[t("circle",{cx:"20",cy:"20",r:"15",fill:"none",stroke:"#e0e0e0","stroke-width":"8"}),t("circle",{cx:"20",cy:"20",r:"15",fill:"none",stroke:"#4a90e2","stroke-width":"8","stroke-dasharray":"70 100",transform:"rotate(-90 20 20)"})])],-1))])]),t("div",et,[s[8]||(s[8]=t("div",{class:"section-header"},[t("h2",null,"充电设备")],-1)),t("div",{class:"chart-container",ref_key:"deviceChartRef",ref:e},null,512)]),t("div",it,[t("div",ot,[s[9]||(s[9]=t("h3",{class:"card-title"},"快速操作",-1)),t("div",{class:"chart-container",ref_key:"operationChartRef",ref:g},null,512)]),t("div",lt,[s[10]||(s[10]=t("h3",{class:"card-title"},"状态指示灯",-1)),t("div",{class:"chart-container",ref_key:"statusChartRef",ref:u},null,512)]),t("div",rt,[s[11]||(s[11]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"帮助信息"),t("a",{href:"#",class:"more-link"},"查看更多")],-1)),t("div",nt,[(S(),C(N,null,V(R,(p,F)=>t("div",{class:"help-item",key:F},[t("span",{class:q(["help-badge",p.type])},n(p.badge),3),t("span",dt,n(p.text),1)])),64))])])])])}}},ft=O(ct,[["__scopeId","data-v-8abf16ca"]]);export{ft as default};
