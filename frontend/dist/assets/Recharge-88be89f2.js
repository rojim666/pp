import{_ as z,a as F,s as M,r,E as w,o as v,c as p,b as e,t as i,y as m,F as S,z as U,A as k,e as V,v as D,d as N,M as x}from"./index-324e4295.js";const E={class:"page recharge-page"},T={class:"recharge-container"},$={class:"balance-card"},j={class:"balance-amount"},L={class:"value"},P={class:"balance-footer"},Y={class:"account-info"},q={class:"account-value"},G={class:"account-info"},H={class:"account-value"},J={class:"recharge-options"},K={class:"amount-grid"},O=["onClick"],Q={class:"amount-value"},W={class:"action-area"},X=["disabled"],Z={key:0},ee={key:1},se={__name:"Recharge",setup(ae){const b=F(),{currentUser:l}=M(b),C=[50,100,200,500,1e3],o=r(100),d=r(""),t=r(!1),c=r(!1),u=w(()=>t.value?d.value||0:o.value),_=w(()=>{const a=u.value;return typeof a=="number"&&a>0}),A=a=>{o.value=a,t.value=!1,d.value=""},B=()=>{t.value=!0,o.value=null},I=()=>{t.value||(t.value=!0,o.value=null)},R=async()=>{if(_.value)try{c.value=!0,await x.recharge(l.value.id,u.value);try{const a=await x.get(l.value.id);b.setUser(a)}catch(a){console.error("刷新余额失败",a)}c.value=!1,alert(`成功充值 ¥${u.value}`),t.value&&(d.value="",o.value=100,t.value=!1)}catch(a){console.error("充值失败:",a),alert("充值失败，请稍后重试"),c.value=!1}};return(a,s)=>{var h,f,g,y;return v(),p("div",E,[s[10]||(s[10]=e("h1",{class:"page-title"},"充值中心",-1)),e("div",T,[e("div",$,[s[4]||(s[4]=e("div",{class:"balance-header"},[e("span",{class:"label"},"当前余额"),e("span",{class:"currency"},"CNY")],-1)),e("div",j,[s[1]||(s[1]=e("span",{class:"symbol"},"¥",-1)),e("span",L,i(((f=(h=m(l))==null?void 0:h.balance)==null?void 0:f.toFixed(2))||"0.00"),1)]),e("div",P,[e("div",Y,[s[2]||(s[2]=e("span",{class:"account-label"},"账户ID:",-1)),e("span",q,i((g=m(l))==null?void 0:g.id),1)]),e("div",G,[s[3]||(s[3]=e("span",{class:"account-label"},"用户名:",-1)),e("span",H,i((y=m(l))==null?void 0:y.username),1)])])]),e("div",J,[s[8]||(s[8]=e("h2",{class:"section-title"},"选择充值金额",-1)),e("div",K,[(v(),p(S,null,U(C,n=>e("button",{key:n,class:k(["amount-btn",{active:o.value===n}]),onClick:te=>A(n)},[s[5]||(s[5]=e("span",{class:"amount-symbol"},"¥",-1)),e("span",Q,i(n),1)],10,O)),64)),e("div",{class:k(["custom-amount",{active:t.value}])},[s[6]||(s[6]=e("span",{class:"input-symbol"},"¥",-1)),V(e("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=n=>d.value=n),placeholder:"自定义金额",onFocus:B,onInput:I,min:"1"},null,544),[[D,d.value,void 0,{number:!0}]])],2)]),s[9]||(s[9]=N('<h2 class="section-title" data-v-80ecbedd>支付方式</h2><div class="payment-methods" data-v-80ecbedd><div class="payment-method active" data-v-80ecbedd><div class="method-icon wechat" data-v-80ecbedd><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-80ecbedd><path d="M17.5 10c2.5 0 4.5-1.8 4.5-4s-2-4-4.5-4c-2.5 0-4.5 1.8-4.5 4 0 .4.1.9.2 1.3-1.6-.3-3.2.2-4.2 1.2-1.3 1.3-1.3 3.4 0 4.7.5.5 1.1.8 1.8 1 .1.4.1.8.1 1.2 0 2.5-2.2 4.5-5 4.5-.6 0-1.2-.1-1.7-.3-.4.3-.9.5-1.4.5-.3 0-.6-.1-.8-.2.1-.4.3-.8.6-1.1-.9-.8-1.4-1.9-1.4-3.1 0-2.5 2.2-4.5 5-4.5 1.6 0 3 .7 3.9 1.8.9-.6 2-1 3.1-1h.1c1.3-.6 2.7-1 4.2-1z" fill="currentColor" data-v-80ecbedd></path></svg></div><span class="method-name" data-v-80ecbedd>微信支付</span><div class="method-check" data-v-80ecbedd><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-80ecbedd><circle cx="12" cy="12" r="10" fill="#34C759" data-v-80ecbedd></circle><path d="M8 12l3 3 5-5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-80ecbedd></path></svg></div></div><div class="payment-method disabled" data-v-80ecbedd><div class="method-icon alipay" data-v-80ecbedd><span style="font-weight:800;font-size:14px;" data-v-80ecbedd>支</span></div><span class="method-name" data-v-80ecbedd>支付宝</span></div></div>',2)),e("div",W,[e("button",{class:"btn-submit",onClick:R,disabled:c.value||!_.value},[c.value?(v(),p("span",Z,"处理中...")):(v(),p("span",ee,"立即充值 ¥"+i(u.value),1))],8,X),s[7]||(s[7]=e("p",{class:"tip-text"},'点击"立即充值"即代表您已阅读并同意《充值服务协议》',-1))])])])])}}},ne=z(se,[["__scopeId","data-v-80ecbedd"]]);export{ne as default};
