import{n as w,r as o,E as n,K as c}from"./index-324e4295.js";import{a as l}from"./index-1d215042.js";const S=w("record",()=>{const r=o([]),s=o(!1),a=o(null),i=n(()=>r.value.length),d=n(()=>r.value.filter(t=>t.status===l.CHARGING).length),f=n(()=>r.value.filter(t=>t.status===l.COMPLETED).length),g=n(()=>r.value.reduce((t,e)=>t+e.energy,0)),v=n(()=>r.value.reduce((t,e)=>t+e.totalFee,0)),y=n(()=>r.value.slice(0,10));async function h(){s.value=!0,a.value=null;try{const t=await c.list();r.value=(t==null?void 0:t.records)??[]}catch(t){a.value=t.message,console.error("Failed to fetch records:",t)}finally{s.value=!1}}async function m(t){try{return await c.get(t)}catch(e){return a.value=e.message,null}}async function R(t){try{const e=await c.list({userId:t});return(e==null?void 0:e.records)??e??[]}catch(e){return a.value=e.message,[]}}async function C(t){try{const e=await c.list({stationId:t});return(e==null?void 0:e.records)??e??[]}catch(e){return a.value=e.message,[]}}async function p(t){s.value=!0;try{const u=await c.start(t);return r.value.unshift(u),u}catch(e){return a.value=e.message,null}finally{s.value=!1}}return{records:r,loading:s,error:a,totalCount:i,chargingCount:d,completedCount:f,totalEnergy:g,totalRevenue:v,recentRecords:y,fetchRecords:h,getRecordById:m,getRecordsByUserId:R,getRecordsByStationId:C,createRecord:p}});export{S as u};
