import{_ as O,u as E,a as T,r as w,l as g,q,o as e,c as n,b as t,i as h,t as a,e as v,v as p,k,F as R,z as G,A as b,w as H,I as J,L as _}from"./index-80ce5560.js";const K={class:"profile-page"},Q={class:"profile-card"},W={class:"profile-content"},X={class:"avatar-section"},Y={class:"avatar-wrapper"},Z={class:"profile-info"},tt={class:"role"},st={class:"email"},it={class:"profile-stats"},et={class:"stat-item"},nt={class:"stat-value"},ot={class:"stat-item"},lt={class:"stat-value"},at={class:"stat-item"},dt={class:"stat-value"},rt={class:"quick-actions"},ut={class:"action-icon",style:{background:"linear-gradient(135deg, #34C759, #30B74F)"}},ct={class:"action-icon",style:{background:"linear-gradient(135deg, #FF9500, #FF8C00)"}},vt={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"}},pt={class:"action-icon",style:{background:"linear-gradient(135deg, #5AC8FA, #0AB5FF)"}},bt={class:"action-icon",style:{background:"linear-gradient(135deg, #AF52DE, #BF5AF2)"}},mt={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"24px",height:"24px"}},ft={class:"info-section"},yt={class:"section-header"},gt={class:"info-grid"},kt={class:"info-item"},wt={key:1,class:"info-value"},ht={class:"info-item"},_t={key:1,class:"info-value"},Ct={class:"info-item"},$t={key:1,class:"info-value"},At={class:"info-item"},xt={key:1,class:"info-value"},Ft={class:"info-item"},Ut={key:1,class:"info-value"},Vt={class:"info-item"},Dt={key:1,class:"info-value"},Mt={key:0,class:"action-buttons"},jt={class:"info-section"},Pt={class:"section-header"},Bt={class:"activity-list"},zt={class:"activity-content"},Lt={class:"activity-title"},St={class:"activity-time"},It={class:"info-section"},Nt={class:"binding-list"},Ot={class:"binding-item"},Et={class:"binding-header"},Tt={class:"binding-info"},qt={key:0,class:"binding-details"},Rt={class:"binding-item"},Gt={class:"binding-header"},Ht={class:"binding-info"},Jt={key:0,class:"binding-details"},Kt={class:"binding-item"},Qt={class:"binding-header"},Wt={class:"binding-info"},Xt={key:0,class:"binding-details"},Yt={class:"info-section"},Zt={class:"security-list"},ts={class:"security-item"},ss={class:"security-header"},is={class:"security-item"},es={class:"security-header"},ns={class:"security-item"},os={class:"security-header"},ls={class:"security-item"},as={class:"security-header"},ds={class:"modal-header"},rs={class:"modal-body"},us={class:"form-group"},cs={class:"form-group"},vs={class:"form-group"},ps={class:"modal-footer"},bs={__name:"Profile",setup(ms){var x,F,U,V,D,M;E();const m=T(),c=w(!1),f=w(!1),j=w(!1),o=g({name:((x=m.currentUser)==null?void 0:x.username)||"用户",role:((F=m.currentUser)==null?void 0:F.role)==="admin"?"系统管理员":((U=m.currentUser)==null?void 0:U.role)==="operator"?"运营管理员":"普通用户",email:((V=m.currentUser)==null?void 0:V.email)||"",phone:((D=m.currentUser)==null?void 0:D.phone)||"",department:"运营管理部",position:"用户",joinDate:(M=m.currentUser)!=null&&M.createdAt?new Date(m.currentUser.createdAt).toLocaleDateString():"-",loginDays:"-",totalOperations:"-",lastLogin:"-"}),u=g({name:o.name,phone:o.phone,email:o.email,department:o.department,position:o.position,joinDate:o.joinDate}),r=g({current:"",new:"",confirm:""}),l=g({wechat:{bound:!1,account:""},alipay:{bound:!1,account:""},vehicle:{bound:!1,plate:""}}),y=g({emailVerify:!1,twoFactorAuth:!1,locationAlert:!1}),A=w([]),P=async()=>{try{const d=await J.list({page:1,size:5});d.data&&d.data.records&&(A.value=d.data.records.map(s=>({id:s.id,action:`在 ${s.stationName} ${s.status==="charging"?"开始充电":"完成充电"}`,time:s.updatedAt?new Date(s.updatedAt).toLocaleString():"刚刚",type:s.status==="charging"?"edit":"check",icon:"plug",status:s.status==="failed"?"error":"success",statusText:s.status==="failed"?"失败":"成功"})))}catch(d){console.error(d)}},B=()=>{c.value=!0},z=()=>{f.value=!0},L=()=>{c.value=!1,Object.assign(u,{name:o.name,phone:o.phone,email:o.email,department:o.department,position:o.position,joinDate:o.joinDate})},S=()=>{Object.assign(o,u),c.value=!1,alert("个人资料已保存！")},I=()=>{if(!r.current||!r.new||!r.confirm){alert("请填写完整的密码信息");return}if(r.new!==r.confirm){alert("两次输入的新密码不一致");return}if(r.new.length<6){alert("新密码长度不能少于6位");return}alert("密码修改成功！"),f.value=!1,r.current="",r.new="",r.confirm=""},C=d=>{alert(`正在打开 ${d==="wechat"?"微信":d==="alipay"?"支付宝":"车牌"} 绑定页面...`),d==="wechat"?(l.wechat.bound=!0,l.wechat.account="wx_user_12345"):d==="alipay"&&(l.alipay.bound=!0,l.alipay.account="alipay_user@alipay.com")},$=d=>{confirm(`确定要解绑 ${d==="wechat"?"微信":d==="alipay"?"支付宝":"车牌"} 账号吗？`)&&(d==="wechat"?(l.wechat.bound=!1,l.wechat.account=""):d==="alipay"?(l.alipay.bound=!1,l.alipay.account=""):d==="vehicle"&&(l.vehicle.bound=!1,l.vehicle.plate=""),alert("已解绑"))},N=()=>{confirm(`注销账户是不可逆的操作，将永久删除您的账户及所有数据。

确定要继续吗？`)&&confirm("请再次确认：您确实要注销账户吗？")&&alert("账户注销申请已提交，我们将在7个工作日内处理。")};return q(()=>{P()}),(d,s)=>(e(),n("div",K,[t("div",Q,[s[31]||(s[31]=t("div",{class:"profile-banner"},null,-1)),t("div",W,[t("div",X,[t("div",Y,[s[25]||(s[25]=t("img",{src:"https://via.placeholder.com/120",alt:"用户头像",class:"avatar"},null,-1)),t("button",{class:"avatar-edit-btn",onClick:s[0]||(s[0]=i=>j.value=!0)},[h(_,{name:"settings",size:"sm"})])])]),t("div",Z,[t("h1",null,a(o.name),1),t("p",tt,a(o.role),1),t("p",st,a(o.email),1),t("div",it,[t("div",et,[t("div",nt,a(o.loginDays),1),s[26]||(s[26]=t("div",{class:"stat-label"},"连续登录天数",-1))]),s[29]||(s[29]=t("div",{class:"stat-divider"},null,-1)),t("div",ot,[t("div",lt,a(o.totalOperations),1),s[27]||(s[27]=t("div",{class:"stat-label"},"累计操作次数",-1))]),s[30]||(s[30]=t("div",{class:"stat-divider"},null,-1)),t("div",at,[t("div",dt,a(o.lastLogin),1),s[28]||(s[28]=t("div",{class:"stat-label"},"最后登录",-1))])])])])]),t("div",rt,[t("button",{class:"action-card",onClick:B},[t("div",ut,[h(_,{name:"user",size:"md"})]),s[32]||(s[32]=t("div",{class:"action-content"},[t("h3",null,"编辑资料"),t("p",null,"修改个人信息")],-1))]),t("button",{class:"action-card",onClick:z},[t("div",ct,[(e(),n("svg",vt,[...s[33]||(s[33]=[t("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",stroke:"white","stroke-width":"2"},null,-1),t("path",{d:"M7 11V7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V11",stroke:"white","stroke-width":"2","stroke-linecap":"round"},null,-1)])]))]),s[34]||(s[34]=t("div",{class:"action-content"},[t("h3",null,"修改密码"),t("p",null,"更改登录密码")],-1))]),t("button",{class:"action-card",onClick:s[1]||(s[1]=i=>d.$router.push("/notifications"))},[t("div",pt,[h(_,{name:"bell",size:"md"})]),s[35]||(s[35]=t("div",{class:"action-content"},[t("h3",null,"通知中心"),t("p",null,"查看所有通知")],-1))]),t("button",{class:"action-card",onClick:s[2]||(s[2]=i=>d.$router.push("/settings-theme"))},[t("div",bt,[(e(),n("svg",mt,[...s[36]||(s[36]=[t("circle",{cx:"12",cy:"12",r:"5",stroke:"white","stroke-width":"2"},null,-1),t("path",{d:"M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24",stroke:"white","stroke-width":"2","stroke-linecap":"round"},null,-1)])]))]),s[37]||(s[37]=t("div",{class:"action-content"},[t("h3",null,"主题设置"),t("p",null,"浅色/深色模式")],-1))])]),t("div",ft,[t("div",yt,[s[38]||(s[38]=t("h2",null,"基本信息",-1)),t("button",{class:"edit-btn",onClick:s[3]||(s[3]=i=>c.value=!c.value)},a(c.value?"取消编辑":"编辑"),1)]),t("div",gt,[t("div",kt,[s[39]||(s[39]=t("label",null,"用户名",-1)),c.value?v((e(),n("input",{key:0,"onUpdate:modelValue":s[4]||(s[4]=i=>u.name=i),type:"text",class:"input-field"},null,512)),[[p,u.name]]):(e(),n("div",wt,a(o.name),1))]),t("div",ht,[s[40]||(s[40]=t("label",null,"手机号码",-1)),c.value?v((e(),n("input",{key:0,"onUpdate:modelValue":s[5]||(s[5]=i=>u.phone=i),type:"text",class:"input-field"},null,512)),[[p,u.phone]]):(e(),n("div",_t,a(o.phone),1))]),t("div",Ct,[s[41]||(s[41]=t("label",null,"电子邮箱",-1)),c.value?v((e(),n("input",{key:0,"onUpdate:modelValue":s[6]||(s[6]=i=>u.email=i),type:"email",class:"input-field"},null,512)),[[p,u.email]]):(e(),n("div",$t,a(o.email),1))]),t("div",At,[s[42]||(s[42]=t("label",null,"所属部门",-1)),c.value?v((e(),n("input",{key:0,"onUpdate:modelValue":s[7]||(s[7]=i=>u.department=i),type:"text",class:"input-field"},null,512)),[[p,u.department]]):(e(),n("div",xt,a(o.department),1))]),t("div",Ft,[s[43]||(s[43]=t("label",null,"职位",-1)),c.value?v((e(),n("input",{key:0,"onUpdate:modelValue":s[8]||(s[8]=i=>u.position=i),type:"text",class:"input-field"},null,512)),[[p,u.position]]):(e(),n("div",Ut,a(o.position),1))]),t("div",Vt,[s[44]||(s[44]=t("label",null,"入职日期",-1)),c.value?v((e(),n("input",{key:0,"onUpdate:modelValue":s[9]||(s[9]=i=>u.joinDate=i),type:"date",class:"input-field"},null,512)),[[p,u.joinDate]]):(e(),n("div",Dt,a(o.joinDate),1))])]),c.value?(e(),n("div",Mt,[t("button",{class:"btn secondary",onClick:L},"取消"),t("button",{class:"btn primary",onClick:S},"保存修改")])):k("",!0)]),t("div",jt,[t("div",Pt,[s[45]||(s[45]=t("h2",null,"最近操作",-1)),t("button",{class:"view-more-btn",onClick:s[10]||(s[10]=i=>d.$router.push("/system"))},"查看更多")]),t("div",Bt,[(e(!0),n(R,null,G(A.value,i=>(e(),n("div",{key:i.id,class:"activity-item"},[t("div",{class:b(["activity-icon",i.type])},[h(_,{name:i.icon,size:"sm"},null,8,["name"])],2),t("div",zt,[t("div",Lt,a(i.action),1),t("div",St,a(i.time),1)]),t("div",{class:b(["activity-status",i.status])},a(i.statusText),3)]))),128))])]),t("div",It,[s[49]||(s[49]=t("div",{class:"section-header"},[t("h2",null,"账户绑定")],-1)),t("div",Nt,[t("div",Ot,[t("div",Et,[t("div",Tt,[s[46]||(s[46]=t("div",{class:"binding-title"},"微信账号",-1)),t("div",{class:b(["binding-status",l.wechat.bound?"bound":"unbound"])},a(l.wechat.bound?"已绑定":"未绑定"),3)]),l.wechat.bound?(e(),n("button",{key:0,onClick:s[11]||(s[11]=i=>$("wechat")),class:"binding-btn unbind-btn"}," 解绑 ")):(e(),n("button",{key:1,onClick:s[12]||(s[12]=i=>C("wechat")),class:"binding-btn bind-btn"}," 绑定 "))]),l.wechat.bound?(e(),n("div",qt," 账号: "+a(l.wechat.account),1)):k("",!0)]),t("div",Rt,[t("div",Gt,[t("div",Ht,[s[47]||(s[47]=t("div",{class:"binding-title"},"支付宝账号",-1)),t("div",{class:b(["binding-status",l.alipay.bound?"bound":"unbound"])},a(l.alipay.bound?"已绑定":"未绑定"),3)]),l.alipay.bound?(e(),n("button",{key:0,onClick:s[13]||(s[13]=i=>$("alipay")),class:"binding-btn unbind-btn"}," 解绑 ")):(e(),n("button",{key:1,onClick:s[14]||(s[14]=i=>C("alipay")),class:"binding-btn bind-btn"}," 绑定 "))]),l.alipay.bound?(e(),n("div",Jt," 账号: "+a(l.alipay.account),1)):k("",!0)]),t("div",Kt,[t("div",Qt,[t("div",Wt,[s[48]||(s[48]=t("div",{class:"binding-title"},"车牌信息",-1)),t("div",{class:b(["binding-status",l.vehicle.bound?"bound":"unbound"])},a(l.vehicle.bound?"已绑定":"未绑定"),3)]),l.vehicle.bound?(e(),n("button",{key:0,onClick:s[15]||(s[15]=i=>$("vehicle")),class:"binding-btn unbind-btn"}," 解绑 ")):(e(),n("button",{key:1,onClick:s[16]||(s[16]=i=>C("vehicle")),class:"binding-btn bind-btn"}," 绑定 "))]),l.vehicle.bound?(e(),n("div",Xt," 车牌: "+a(l.vehicle.plate),1)):k("",!0)])])]),t("div",Yt,[s[54]||(s[54]=t("div",{class:"section-header"},[t("h2",null,"安全设置")],-1)),t("div",Zt,[t("div",ts,[t("div",ss,[s[50]||(s[50]=t("div",{class:"security-info"},[t("div",{class:"security-title"},"登录邮箱验证"),t("div",{class:"security-description"},"确保账户安全")],-1)),t("button",{class:b(["security-btn",y.emailVerify?"active":""])},a(y.emailVerify?"已启用":"未启用"),3)])]),t("div",is,[t("div",es,[s[51]||(s[51]=t("div",{class:"security-info"},[t("div",{class:"security-title"},"双因素认证 (2FA)"),t("div",{class:"security-description"},"使用身份验证器或短信")],-1)),t("button",{class:b(["security-btn",y.twoFactorAuth?"active":""])},a(y.twoFactorAuth?"已启用":"未启用"),3)])]),t("div",ns,[t("div",os,[s[52]||(s[52]=t("div",{class:"security-info"},[t("div",{class:"security-title"},"登录位置提醒"),t("div",{class:"security-description"},"新地区登录时发送提醒")],-1)),t("button",{class:b(["security-btn",y.locationAlert?"active":""])},a(y.locationAlert?"已启用":"未启用"),3)])]),t("div",ls,[t("div",as,[s[53]||(s[53]=t("div",{class:"security-info"},[t("div",{class:"security-title"},"会话管理"),t("div",{class:"security-description"},"查看和管理登录设备")],-1)),t("button",{class:"security-btn",onClick:s[17]||(s[17]=i=>d.$router.push("/sessions"))},"查看")])])])]),t("div",{class:"info-section danger-section"},[s[56]||(s[56]=t("div",{class:"section-header"},[t("h2",null,"账户安全")],-1)),t("div",{class:"danger-actions"},[t("div",{class:"danger-item"},[t("div",{class:"danger-header"},[s[55]||(s[55]=t("div",{class:"danger-info"},[t("div",{class:"danger-title"},"注销账户"),t("div",{class:"danger-description"},"永久删除您的账户及所有关联数据")],-1)),t("button",{class:"btn danger",onClick:N}," 注销账户 ")])])])]),f.value?(e(),n("div",{key:0,class:"modal-overlay",onClick:s[24]||(s[24]=i=>f.value=!1)},[t("div",{class:"modal-content",onClick:s[23]||(s[23]=H(()=>{},["stop"]))},[t("div",ds,[s[57]||(s[57]=t("h2",null,"修改密码",-1)),t("button",{class:"close-btn",onClick:s[18]||(s[18]=i=>f.value=!1)},"✕")]),t("div",rs,[t("div",us,[s[58]||(s[58]=t("label",null,"当前密码",-1)),v(t("input",{"onUpdate:modelValue":s[19]||(s[19]=i=>r.current=i),type:"password",class:"input-field",placeholder:"请输入当前密码"},null,512),[[p,r.current]])]),t("div",cs,[s[59]||(s[59]=t("label",null,"新密码",-1)),v(t("input",{"onUpdate:modelValue":s[20]||(s[20]=i=>r.new=i),type:"password",class:"input-field",placeholder:"请输入新密码"},null,512),[[p,r.new]])]),t("div",vs,[s[60]||(s[60]=t("label",null,"确认新密码",-1)),v(t("input",{"onUpdate:modelValue":s[21]||(s[21]=i=>r.confirm=i),type:"password",class:"input-field",placeholder:"请再次输入新密码"},null,512),[[p,r.confirm]])])]),t("div",ps,[t("button",{class:"btn secondary",onClick:s[22]||(s[22]=i=>f.value=!1)},"取消"),t("button",{class:"btn primary",onClick:I},"确认修改")])])])):k("",!0)]))}},ys=O(bs,[["__scopeId","data-v-1ee4b9a9"]]);export{ys as default};
